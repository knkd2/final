<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å®¶èœå–®ç®¡ç†</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header class="navbar">
        <h1>ğŸ½ï¸ ç®¡ç†æ‚¨çš„èœå–®</h1>
        <div>
            <p>æ­¡è¿ï¼Œ{{ session['username'] }}ï¼</p>
            <form action="{{ url_for('logout') }}" method="POST" class="inline-form">
                <button class="btn btn-secondary">ç™»å‡º</button>
            </form>
        </div>
    </header>

    <main class="container">
        <h2>ğŸŒŸ ç•¶å‰èœå“åˆ—è¡¨</h2>
        <ul class="menu-list">
            {% for item in menu_items %}
                <li class="menu-item">
                    <span class="menu-name">{{ item.item_name }}</span>
                    <span class="menu-description">{{ item.description }}</span>
                    <span class="menu-price">{{ item.price }} å…ƒ</span>
                    <a href="{{ url_for('edit_item', item_id=item.id) }}" class="btn btn-secondary">ç·¨è¼¯</a>
                    <form action="{{ url_for('delete_item', item_id=item.id) }}" method="POST" class="inline-form">
                        <button class="btn btn-danger">åˆªé™¤</button>
                    </form>
                </li>
            {% else %}
                <li class="empty-menu">æ‚¨é‚„æ²’æœ‰æ·»åŠ ä»»ä½•èœå“ã€‚</li>
            {% endfor %}
        </ul>

        <h2>ğŸŒŸ ç•¶å‰è¨‚å–®åˆ—è¡¨</h2>
        <ul class="merchantorder-list">
            {% if merchant_orders %}
                {% for order in merchant_orders %}
                    <li class="order-item">
                        <span>è¨‚å–® #{{ order.id }}: {{ order.item_name }}</span> - 
                        <span>é‡‘é¡: ${{ order.price }}</span> - 
                        <span class="order-status">ç‹€æ…‹: {{ order.status }}</span> - 
                        <span class="delivery-status">å¤–é€å“¡ç‹€æ…‹: 
                            {% if order.delivery_status == 'å·²é€šçŸ¥' %}
                                å·²é€šçŸ¥
                            {% elif order.delivery_status == 'å·²æ¥å–®' %}
                                å·²æ¥å–®
                            {% else %}
                                æœªæ¥å–®
                            {% endif %}
                        </span>
                        {% if order.acceptance_status == 'å·²æ‹’çµ•' %}
                            <span class="acceptance-status">å·²æ‹’çµ•</span>
                        {% elif order.acceptance_status == 'å·²æ¥å–®' %}
                            <form action="{{ url_for('confirm_for_delivery', order_id=order.id) }}" method="POST" class="inline-form">
                                <button class="btn btn-primary" type="submit">é€šçŸ¥å¤–é€å“¡</button>
                            </form>
                        {% else %}
                            <form action="{{ url_for('merchant_accept_order', order_id=order.id) }}" method="POST" class="inline-form">
                                <button class="btn btn-secondary" type="submit">æ¥å–®</button>
                            </form>

                            <form action="{{ url_for('merchant_reject_order', order_id=order.id) }}" method="POST" class="inline-form">
                                <button class="btn btn-danger" type="submit">æ‹’çµ•è¨‚å–®</button>
                            </form>
                            
                        {% endif %}
                    </li>
                {% endfor %}
            {% else %}
                <li class="empty-orders">æ²’æœ‰ä»»ä½•å¾…è™•ç†è¨‚å–®ã€‚</li>
            {% endif %}
        </ul>

        <h2>ğŸŒŸ é¡§å®¢è©•è«–</h2>
        <a href="{{ url_for('view_reviews', user_id=session['user_id']) }}" class="btn btn-primary">æŸ¥çœ‹è©•è«–</a>

        <h3>ğŸ“‹ æ·»åŠ æ–°èœå“</h3>
        <form method="POST" class="add-item-form">
            <label for="item_name">èœå“åç¨±:</label>
            <input type="text" id="item_name" name="item_name" required>
            <label for="description">èœå“æè¿°:</label>
            <textarea id="description" name="description" required></textarea>
            <label for="price">åƒ¹æ ¼:</label>
            <input type="number" id="price" name="price" step="0.01" required>
            <button type="submit" class="btn btn-primary">æ·»åŠ èœå“</button>
        </form>
    </main>
    <footer>
        <p>Â© 2024 èœå“èœå–®ç®¡ç†ç³»ç»Ÿ. ç®¡ç†æ‚¨çš„ç¾å‘³èœå–®ï¼</p>
    </footer>
</body>
</html>
